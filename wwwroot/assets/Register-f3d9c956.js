import{_ as m,f as i,r as p,o as u,c as h,a as r,b as g,w as c,h as f,z as w}from"./index-e5788531.js";const b={data(){return{emails:[],mailAddress:null,password:null,users:null}},created(){this.loadEmails()},methods:{loadEmails(){var o=this;this.$toast.open({type:"info",message:"Loading User Emails...",position:"bottom-right",duration:0}),i.get(o.globalUrl+"api/getUsers").then(e=>{o.users=e.data,console.log("these are the users"),console.log(e.data),o.emails=e.data.map(t=>{if(t.mailAddress!="")return t.mailAddress}),o.$toast.clear(),o.$toast.open({type:"success",message:"User Emails Loaded",position:"bottom-right",duration:500})})},handleSubmit(o){var e=this;this.$toast.open({message:"Registering...",duration:0,type:"info"});var t=e.users.filter(s=>s.mailAddress==this.mailAddress)[0];if(console.log("this is the found user"),console.log(t),t){var l=new FormData;l.append("MailAddress",this.mailAddress),l.append("Password",this.password),l.append("user",JSON.stringify(t)),i.post(e.globalUrl+"register",l).then(s=>{console.log("entered post request"),console.log("this is the result"),console.log(s.data),s.data==!0?(e.$toast.clear(),e.$toast.open({type:"success",message:s.data.message}),e.$router.push("/login")):(e.$toast.clear(),console.log(s.data),e.$toast.open({type:"warning",message:s.data.message}))})}else{this.$toast.clear(),this.$toast.warning("This user is not authorized");return}}}},v={class:"w-full h-full flex flex-col items-center pt-32"},x=r("h1",{class:"text-white font-bold text-4xl mb-5 bg-gradient-to-r bg-[rgb(38,65,86)] p-4 w-full rounded-t-md"},"Register",-1),$={class:"w-3/4 mb-3 rounded-sm shadow"},y=r("button",{type:"submit",class:"bg-[rgb(38,65,86)] h-12 text-white font-bold rounded-sm w-3/4"},"Submit",-1);function _(o,e,t,l,s,n){const d=p("vss");return u(),h("div",v,[r("form",{method:"post",onSubmit:e[3]||(e[3]=w(a=>n.handleSubmit(a),["prevent"])),class:"w-1/3 h-auto flex flex-col items-center bg-white rounded-b-md drop-shadow-lg"},[x,r("div",$,[g(d,{searchable:"true",modelValue:s.mailAddress,"onUpdate:modelValue":e[0]||(e[0]=a=>s.mailAddress=a),options:s.emails,placeholder:"Select Email"},null,8,["modelValue","options"])]),c(r("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>s.password=a),class:"w-3/4 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mb-4 h-12",id:"password",placeholder:"Password",name:"password"},null,512),[[f,s.password]]),y,r("div",{onClick:e[2]||(e[2]=a=>this.$router.push("/login")),class:"text-[rgb(38,65,86)] underline flex flex-row justify-center mt-10 hover:cursor-pointer mb-5"},"Login")],32)])}const U=m(b,[["render",_]]);export{U as default};
