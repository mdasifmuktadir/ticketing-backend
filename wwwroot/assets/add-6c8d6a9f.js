import{_ as f,f as c,o as n,c as a,a as s,z as _,w as u,h as x,F as m,g as h,v as b,t as g,d as v}from"./index-e5788531.js";import{T as y}from"./tagify-d17b84b2.js";const w={data(){return{token:null,user:{},groups:null,groupTags:null,addUserCheck:!1,deparmtents:null,users:null}},watch:{addUserCheck(o,e){o==!0&&this.$nextTick(()=>{this.loadGroups()})}},created(){this.token=this.authStore.getToken,this.groups=this.mainStore.getGroups;var o=this.mainStore.getDepartments;this.departments=o.filter(e=>e.email==null&&e.name!=null),this.addUserCheck=!0,this.getUsers()},methods:{getUsers(){var o=this;c.get(o.globalUrl+"api/getUsers").then(e=>{o.users=e.data,console.log(e.data)}).catch(e=>{console.log(e)})},addUser:function(){var o=this;this.user.groups=this.groupTags.value.map(function(r){return r.value});var e=this.users.filter(r=>r.mailAddress==this.user.mailAddress)[0];e.groups=this.user.groups,e.department=this.user.department,e.userType=this.user.userType;var d={user:e,token:this.token};c.post(o.globalUrl+"insertUser",d).then(r=>{console.log(r),o.$router.push("/admin/users")},r=>{console.log(r)})},loadGroups(){var o=[];console.log("from tagify function"),console.log(this.groups.length);for(let d of this.groups)o.push(d.name),console.log("inside for loop"),console.log(d.name);var e=document.querySelector("#groups");this.groupTags=new y(e,{whitelist:o,maxTags:10,enforceWhitelist:!0,dropdown:{maxItems:20,classname:"tags-look",enabled:0,closeOnSelect:!1}})}}},U={class:"flex flex-col justify-center items-center h-auto text-xs"},k={class:"shadow-2xl hover:shadow-blue-600 w-auto flex flex-col justify-center items-center bg-white"},T=s("div",{class:"flex text-white flex-row justify-center items-start w-full bg-blue-500 mb-10 p-4"},[s("span",{class:"text-4xl font-bold"},"Add User")],-1),A=s("label",{class:"mb-20 font-bold"},"Email Address",-1),S={id:"emailList"},V=["value"],C=s("label",{class:"mb-20 font-bold mt-10"},"Department",-1),q=["value"],D=s("label",{class:"mb-20 font-bold mt-10"},"Groups",-1),G=s("input",{type:"text",name:"groups",id:"groups",class:"mb-4 h-11 w-full border border-solid border-gray-200"},null,-1),j=s("label",{class:"mb-20 font-bold mt-10"}," User Type",-1),B=s("option",null,"Requester",-1),L=s("option",null,"Watcher",-1),M=s("option",null,"Approver",-1),E=[B,L,M],F=s("br",{class:"border border-solid border-black"},null,-1),N=s("button",{type:"submit",class:"w-full mt-8 h-11 bg-blue-500 rounded-md text-2xl text-white font-bold mb-2"},"Add",-1);function R(o,e,d,r,l,p){return n(),a("div",U,[s("div",k,[T,s("form",{onSubmit:e[4]||(e[4]=_((...t)=>p.addUser&&p.addUser(...t),["prevent"])),class:"h-auto w-auto px-10"},[A,u(s("input",{list:"emailList","onUpdate:modelValue":e[0]||(e[0]=t=>l.user.mailAddress=t),required:"",class:"w-full h-11 mb-4 border border-solid border-gray-200"},null,512),[[x,l.user.mailAddress]]),s("datalist",S,[(n(!0),a(m,null,h(l.users,(t,i)=>(n(),a(m,{key:i},[t.mailAddress?(n(),a("option",{key:0,value:t.mailAddress},g(t.mailAddress),9,V)):v("",!0)],64))),128))]),C,u(s("select",{type:"text",name:"department",id:"department","onUpdate:modelValue":e[1]||(e[1]=t=>l.user.department=t),class:"mb-4 h-11 w-full border border-solid border-gray-200"},[(n(!0),a(m,null,h(o.departments,(t,i)=>(n(),a("option",{key:i,value:t.name},g(t.name),9,q))),128))],512),[[b,l.user.department]]),D,G,j,u(s("select",{name:"userType","onUpdate:modelValue":e[2]||(e[2]=t=>l.user.userType=t),required:"",class:"mb-4 h-11 w-full border border-solid border-gray-200"},E,512),[[b,l.user.userType]]),F,N,s("button",{onClick:e[3]||(e[3]=t=>this.$router.push("/admin/users")),class:"w-full h-11 bg-gray-300 rounded-md text-2xl text-gray-500 font-bold mb-10"},"Return")],32)])])}const I=f(w,[["render",R]]);export{I as default};
