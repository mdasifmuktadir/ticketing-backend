import{_ as x,f as w,r as v,o as p,c as u,b as c,a as e,t as i,j as f,F as b,g as k,d as y,O as T,P as S}from"./index-e5788531.js";const C={data(){return{approval:0,assigned:0,my:0,myCloseRequests:[],closeRequestsForMe:[],info:[],reject:[],infoMe:[],tickets:[],unassigned:[],accepted:[],filteredTickets:[],rejected:[],closed:[],assignedMe:[]}},created(){this.$toast.info("Loading Data....");var o=this,l=this.authStore.getToken,r=this.authStore.getUser,h=new FormData;h.append("token",l),h.append("user",JSON.stringify(r)),w.post(o.globalUrl+"getAllTickets",h).then(a=>{o.tickets=a.data,o.filteredTickets=o.tickets,o.mainStore.setTickets(o.tickets),o.mainStore.setFilteredTickets(o.tickets),o.unassigned=o.tickets.filter(s=>s.assigned==!1&&s.ticketingHead&&s.status!="Submitted Ticket - Seeking Supervisor Approval"&&s.status!="Closed Ticket"),o.accepted=o.tickets.filter(s=>s.currentHandler&&s.accepted==!0&&s.assigned==!0&&s.assignedTo),o.assigned=o.tickets.filter(s=>s.assigned==!0&&s.ticketingHead&&s.currentHandler!=null&&s.accepted==!1),o.approval=o.tickets.filter(s=>s.higherApprover&&s.ticketingHead&&s.currentHandler&&s.currentHandler.mailAddress==s.higherApprover.mailAddress),o.myCloseRequests=o.tickets.filter(s=>s.madeCloseRequest==!0&&s.prevHandler),o.info=o.tickets.filter(s=>s.ask==!0&&s.ticketingHead),o.assignedMe=o.tickets.filter(s=>s.assignedTo&&s.assignedTo.empName==r.empName&&s.accepted!=!0),o.rejected=o.tickets.filter(s=>s.status=="Rejected"),o.closed=o.tickets.filter(s=>s.status=="Closed Ticket"),o.$toast.clear(),o.$toast.success("Data Loaded Successfully")}).catch(a=>{o.$toast.clear(),console.log("this is the error"),o.$toast.warning(a)})},methods:{filter(o,l){var r=this;switch(l){case"unassigned":r.mainStore.setFilteredTickets(r.unassigned),r.mainStore.setInitialTickets(r.unassigned);break;case"assigned":r.mainStore.setFilteredTickets(r.assigned),r.mainStore.setInitialTickets(r.assigned);break;case"accepted":r.mainStore.setFilteredTickets(r.accepted),r.mainStore.setInitialTickets(r.accepted);break;case"approval":r.mainStore.setFilteredTickets(r.approval),r.mainStore.setInitialTickets(r.approval);break;case"info":r.mainStore.setFilteredTickets(r.info),r.mainStore.setInitialTickets(r.info);break;case"close":r.mainStore.setFilteredTickets(r.myCloseRequests),r.mainStore.setInitialTickets(r.myCloseRequests);break;case"all":r.mainStore.setFilteredTickets(r.tickets),r.mainStore.setInitialTickets(r.tickets);break;case"rejected":r.mainStore.setFilteredTickets(r.rejected),r.mainStore.setInitialTickets(r.rejected);break;case"closed":r.mainStore.setFilteredTickets(r.closed),r.mainStore.setInitialTickets(r.closed);break}},showDetails(o){const l="/ticketing/ticketDetails/"+o;this.$router.push(l)}}},d=o=>(T("data-v-a24b561e"),o=o(),S(),o),F={class:"flex flex-row text-lg h-full w-full bg-[rgb(248,248,248)]",id:"app"},j={class:"flex flex-col h-screen customborder bg-white w-1/6 py-10",id:"sidePanel"},A={class:"flex flex-row w-full items-center hover:cursor-pointer"},I={class:"w-1/6 hover:cursor-pointer"},q=d(()=>e("label",{class:"hover:cursor-pointer"},"All Tickets",-1)),D={class:"hover:cursor-pointer"},H={class:"flex flex-row w-full items-center hover:cursor-pointer"},R={class:"w-1/6 hover:cursor-pointer"},N=d(()=>e("label",{class:"hover:cursor-pointer"},"Unassigned Task",-1)),M={class:"hover:cursor-pointer"},B={class:"flex flex-row hover:cursor-pointer w-full items-center"},E={class:"w-1/6 hover:cursor-pointer"},U=d(()=>e("label",{class:"hover:cursor-pointer"},"Assigned Task",-1)),V={class:"hover:cursor-pointer"},L={class:"hover:cursor-pointer flex flex-row w-full items-center"},O={class:"hover:cursor-pointer w-1/6"},P=d(()=>e("label",{class:"hover:cursor-pointer"},"Accepted Task",-1)),J={class:"hover:cursor-pointer"},z={class:"flex flex-row w-full items-center hover:cursor-pointer"},G={class:"w-1/6 hover:cursor-pointer"},K=d(()=>e("label",{class:"hover:cursor-pointer"},"Tickets Awaiting Higher Approval",-1)),Q={class:"hover:cursor-pointer"},W={class:"flex flex-row w-full items-center hover:cursor-pointer"},X={class:"w-1/6 hover:cursor-pointer"},Y=d(()=>e("label",{class:"hover:cursor-pointer"},"My Close Requests",-1)),Z={class:"hover:cursor-pointer"},$={class:"flex flex-row w-full items-center hover:cursor-pointer"},ee={class:"w-1/6 hover:cursor-pointer"},se=d(()=>e("label",{class:"hover:cursor-pointer"},"Information Requested By Me",-1)),re={class:"hover:cursor-pointer"},oe={class:"h-[100vh] p-5 bg-[rgb(248,248,248)] flex flex-col w-5/6 mx-2"},te={class:"flex flex-row items-end justify-end"},le={class:"overflow-x-auto mx-2 customerborder w-full overflow-y-scroll",style:{"max-height":"80vh","min-height":"auto"}},ie={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ae=d(()=>e("thead",{class:"text-xs text-gray-700 uppercase bg-white dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Ticket No. "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Req. Date "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Status "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," problem "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Requester "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Current Handler ")])],-1)),ce=["onClick"],ne={scope:"row",class:"table-row2 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},de={class:"table-row2 px-6 py-4"},he={class:"table-row2 px-6 py-4"},pe={class:"table-row2 px-6 py-4"},ue={class:"table-row2 px-6 py-4"},ve={class:"table-row2 px-6 py-4"};function fe(o,l,r,h,a,s){const _=v("FilterDrawer"),n=v("font-awesome-icon"),m=v("FilterButton");return p(),u(b,null,[c(_),e("div",F,[e("div",j,[e("div",{onClick:l[0]||(l[0]=t=>s.filter(t,"all")),class:"flex flex-row justify-around items-center w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",A,[e("div",I,[c(n,{icon:"fa-solid fa-border-all",class:"hover:cursor-pointer"})]),q]),e("label",D,i(a.tickets.length),1)]),e("div",{onClick:l[1]||(l[1]=t=>s.filter(t,"unassigned")),class:"flex flex-row justify-around items-center w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",H,[e("div",R,[c(n,{icon:"fa-solid fa-tasks",class:"hover:cursor-pointer"})]),N]),e("label",M,i(a.unassigned.length),1)]),e("div",{onClick:l[2]||(l[2]=t=>s.filter(t,"assigned")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",B,[e("div",E,[c(n,{icon:"fa-solid fa-thumbtack hover:cursor-pointer "})]),U]),e("label",V,i(a.assigned.length),1)]),e("div",{onClick:l[3]||(l[3]=t=>s.filter(t,"accepted")),class:"hover:cursor-pointer flex flex-row justify-around w-full px-5 hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",L,[e("div",O,[c(n,{icon:" hover:cursor-pointer fa-solid fa-check"})]),P]),e("label",J,i(a.accepted.length),1)]),e("div",{onClick:l[4]||(l[4]=t=>s.filter(t,"approval")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",z,[e("div",G,[c(n,{icon:"fa-solid fa-thumbtack",class:"hover:cursor-pointer"})]),K]),e("label",Q,i(a.approval.length),1)]),e("div",{onClick:l[5]||(l[5]=t=>s.filter(t,"close")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",W,[e("div",X,[c(n,{icon:"fa-solid fa-file-export",class:"hover:cursor-pointer"})]),Y]),e("label",Z,i(a.myCloseRequests.length),1)]),e("div",{onClick:l[6]||(l[6]=t=>s.filter(t,"info")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",$,[e("div",ee,[c(n,{icon:"fa-solid fa-question",class:"hover:cursor-pointer"})]),se]),e("label",re,i(a.infoMe.length),1)])]),e("div",oe,[e("div",te,[e("div",{onClick:l[7]||(l[7]=(...t)=>this.downloadExcel&&this.downloadExcel(...t)),class:"p-2 bg-white hover:cursor-pointer border border-solid border-gray-400 rounded-sm mt-2 mb-2 mr-2"},[c(n,{icon:"fa-solid fa-table",class:"mr-2"}),f("Download As Excel")]),f(),c(m)]),e("div",le,[e("table",ie,[ae,e("tbody",null,[(p(!0),u(b,null,k(this.mainStore.getFilteredTickets,(t,g)=>(p(),u("tr",{onClick:be=>s.showDetails(t._id),class:"hover:cursor-pointer bg-white border-b dark:bg-gray-800 dark:border-gray-700",key:g},[e("th",ne,i(t._id),1),e("td",de,i(t.requestDate),1),e("td",he,i(t.status),1),e("td",pe,i(t.problemDetails),1),e("td",ue,i(t.raisedBy.empName),1),e("td",ve,[t.currentHandler?(p(),u(b,{key:0},[f(i(t.currentHandler.empName),1)],64)):y("",!0)])],8,ce))),128))])])])])])],64)}const me=x(C,[["render",fe],["__scopeId","data-v-a24b561e"]]);export{me as default};
