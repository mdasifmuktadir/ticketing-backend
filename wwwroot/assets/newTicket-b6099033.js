import{_ as S,f as w,r as _,o as n,c as d,a as e,w as u,v,F as m,g as b,d as k,b as p,h as g,i as T,t as x}from"./index-e5788531.js";const U={data(){return{files:[],helpCheck:!1,ticket:{department:"",problemDetails:"",priority:"normal",approvalRequired:!1,raisedFor:"",remarks:"",serviceType:""},users:[],teams:[],team:null,hasService:!1,currentTeam:null,details:[]}},computed:{processedUsers(){var s=this.users.map(a=>a.empName+"/"+a.designation+"/"+a.unit),t="Not Required";return s.unshift(t),s},processedUsers2(){var s=this.users.map(t=>t.empName+"/"+t.designation+"/"+t.unit);return s}},created(){this.getApprovers(),this.getTeams()},methods:{checkServiceDetail(){var s=this;console.log("this is the service type"),console.log(s.ticket.serviceType);var t=s.team.services.filter(a=>a.serviceName==s.ticket.serviceType)[0];console.log("this is the service name"),console.log(t),t.details.length>0&&(s.details=t.details)},checkService(){console.log("fired check service");var s=this;s.team=s.teams.filter(t=>t.name==this.ticket.department)[0],s.team.hasServices?s.hasService=!0:(s.hasService=!1,s.team.details.length>0&&(s.details=s.team.details))},setFile(s){for(var t of s.target.files)this.files.push(t)},removeFile(s){this.files.splice(s,1)},submit(){var s=this;if(this.ticket.department==""){this.$toast.warning("Please Select A Department");return}if(this.hasService&&this.ticket.serviceType==""){this.$toast.warning("Please Select A Service Type");return}this.$toast.info("Submitting Ticket.....");var t=this.authStore.getToken,a=this.authStore.getUser;console.log("this is the user"),console.log(a);var i=new FormData;for(var l of this.files)i.append("file",l);var r=this.ticket;if(r.details=s.details,r.approvalRequired){var f=this.users.filter(o=>o.empName==s.ticket.supervisor.split("/")[0])[0];r.supervisor=f}if(r.raisedFor!="Not Required"){var h=this.users.filter(o=>o.empName==s.ticket.raisedFor.split("/")[0])[0];r.raisedFor=h}else r.raisedFor=null;console.log("this is the user"),console.log(a),r.assignedTo=null,r.higherApprover=null,r.hasService=s.hasService,console.log("this is the has service"),console.log(r.hasService),(r.priority==""||r.priority=="")&&(r.priority="normal"),i.append("ticket",JSON.stringify(r)),i.append("token",t),i.append("user",JSON.stringify(a)),i.append("comment",this.comment),console.log("this is the ticket data"),console.log(r),console.log("this is the url "+s.globalUrl+"submitTicket"),w.post(s.globalUrl+"submitTicket",i).then(o=>{s.$toast.clear(),s.$toast.success("Ticket Submitted"),s.$router.push("/ticketing/myTickets")}).catch(o=>{s.$toast.clear(),s.$toast.warning(o)})},getApprovers(){var s=this,t=this.authStore.getToken,a={token:t};w.post(s.globalUrl+"getUsers",a).then(function(i){s.users=i.data.filter(l=>l.userType=="normal"||l.userType=="leader"||l.userType=="support"),console.log(i.data)}).catch(function(i){console.log(i)})},getTeams(){var s=this,t=this.authStore.getUser,a=this.authStore.getToken,i=new FormData;i.append("user",t),i.append("token",a),w.post(s.globalUrl+"getTeams",i).then(l=>{s.teams=l.data,console.log("this is the teams result"),console.log(l.data)}).catch(l=>s.$toast.warning(l))},showHelp(){this.helpCheck==!1?(this.$refs.help.style.top="100px",this.$refs.main.style.filter="blur(10px)",this.helpCheck=!0):(this.$refs.help.style.top="-400px",this.$refs.main.style.filter="blur(0px)",this.helpCheck=!1)}}},N={class:"flex flex-col bg-white border-2 border-solid border-black h-auto p-5 justify-center items-center w-[900px]",style:{"z-index":"999",position:"fixed",top:"-400px",left:"250px",transition:"0.5s"},ref:"help"},F=T('<div class="flex flex-row w-full mb-4 border-b border-solid border-b-gray-400"><div class="w-1/4 font-bold text-red-500"> Emergency Priority </div><div class="w-3/4 mb-5"> Defects or major problems that interrupt or halt production or business. Emergency priority support requests takes precedence over all other support requests </div></div><div class="flex flex-row w-full mb-4 border-b border-solid border-b-gray-400"><div class="w-1/4 font-bold text-orange-400"> High Priority </div><div class="w-3/4 mb-5"> Defects or major problems that might slow down business. However, with technical intervention or a functional work-around user can complete the current business business cycle, access the services or enterprise application. High priority support requests take precendence over medium and low priority support requests in a specific area of support. </div></div><div class="flex flex-row w-full mb-4 border-b border-solid border-b-gray-400"><div class="w-1/4 font-bold text-blue-500"> Medium Priority </div><div class="w-3/4 mb-5"> Problems related to development, system administration, management issues not defined as emergency or high. This is the most common priority level. Medium priority support request take precendence over normal priority support requests in a specific area of support </div></div><div class="flex flex-row w-full mb-4"><div class="w-1/4 font-bold text-emerald-500"> Normal Priority </div><div class="w-3/4 mb-5"> Problems that are not effecting day to day work but needs to be addressed. Normal priority support requests are processed when there is no emergency, high and medium priority support requests in specific area of support. </div></div>',4),V={class:"flex flex-row justify-end w-full"},q={class:"w-full h-full px-10 py-10 z-10",ref:"main"},j=e("label",{class:"text-black text-4xl"},"New Ticket",-1),D={class:"flex flex-col w-fill h-full"},C={class:"mt-5 text-black w-full flex flex-row"},P=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Department:",-1),R=["value"],A={key:0,class:"mt-5 text-black w-full flex flex-row"},H=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Service Type:",-1),z=e("option",{value:"",disabled:"",selected:""},"Please Select ",-1),M=["value"],E={for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},B=["onUpdate:modelValue"],J={class:"mt-5 text-black w-full flex flex-row"},O=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Priority:",-1),L=["value"],W=["value"],Y=["value"],G=["value"],I={class:"mt-5 text-black w-full flex flex-row"},K=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Problem Details:",-1),Q={class:"mt-5 text-black w-full flex flex-row"},X=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Approval Required:",-1),Z=e("option",{value:!0},"Yes",-1),$=e("option",{value:!1},"No",-1),ee=[Z,$],te={key:2,class:"mt-5 text-black w-full flex flex-row"},se=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Select supervisor:",-1),oe={class:"w-8/12 z-10"},le={class:"mt-5 text-black w-full flex flex-row"},re=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Raise on behalf of:",-1),ie={class:"w-8/12"},ae={class:"mt-5 text-black w-full flex flex-row"},ne=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},"Remarks:",-1),de={class:"mt-5 text-black w-full flex flex-row"},ce=e("div",{for:"",class:"w-44 text-end mr-10 flex flex-col justify-center font-bold"},null,-1),ue={class:"w-8/12"},fe=e("label",{for:"file",class:"hover:cursor-pointer"},"Attach File",-1),me={class:"flex-col mt-2 w-full"},pe={class:"w-1/2"},he={class:"w-1/2"},ve=e("hr",{class:"border border-solid border-slate-300"},null,-1),be={class:"flex flex-row justify-center items-center mt-5"};function xe(s,t,a,i,l,r){const f=_("font-awesome-icon"),h=_("vss");return n(),d(m,null,[e("div",N,[F,e("div",V,[e("div",{class:"font-bold text-white bg-blue-500 p-3 rounded-sm hover:cursor-pointer",onClick:t[0]||(t[0]=(...o)=>r.showHelp&&r.showHelp(...o))},"Close")])],512),e("div",q,[j,e("div",D,[e("div",C,[P,u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.ticket.department=o),name:"",id:"",class:"w-8/12 bg-lime-50 border border-solid rounded-md border-slate-300 h-9",onChange:t[2]||(t[2]=(...o)=>r.checkService&&r.checkService(...o))},[(n(!0),d(m,null,b(l.teams,(o,c)=>(n(),d("option",{key:c,value:o.name},x(o.name),9,R))),128))],544),[[v,l.ticket.department]])]),l.hasService?(n(),d("div",A,[H,u(e("select",{onChange:t[3]||(t[3]=(...o)=>r.checkServiceDetail&&r.checkServiceDetail(...o)),"onUpdate:modelValue":t[4]||(t[4]=o=>l.ticket.serviceType=o),name:"",id:"",class:"w-8/12 bg-lime-50 border border-solid rounded-md border-slate-300 h-9"},[z,(n(!0),d(m,null,b(l.team.services,(o,c)=>(n(),d("option",{key:c,value:o.serviceName},x(o.serviceName),9,M))),128))],544),[[v,l.ticket.serviceType]])])):k("",!0),l.details.length>0?(n(!0),d(m,{key:1},b(l.details,(o,c)=>(n(),d("div",{class:"mt-5 text-black w-full flex flex-row",key:c},[e("div",E,x(o.label)+":",1),u(e("input",{"onUpdate:modelValue":y=>l.details[c].input=y,name:"",id:"",class:"w-8/12 p-3 bg-lime-50 border border-solid rounded-md border-slate-300 h-9"},null,8,B),[[g,l.details[c].input]])]))),128)):k("",!0),e("div",J,[O,u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.ticket.priority=o),name:"",id:"",class:"w-8/12 bg-lime-50 border border-solid rounded-md border-slate-300 h-9"},[e("option",{value:s.normal},"Normal",8,L),e("option",{value:s.medium},"Medium",8,W),e("option",{value:s.high},"High",8,Y),e("option",{value:s.emergency},"Emergency",8,G)],512),[[v,l.ticket.priority]]),e("div",{class:"flex flex-col justify-center items-center p-1 ml-2 hover:cursor-pointer bg-blue-500",style:{"border-radius":"1400px"},onClick:t[6]||(t[6]=(...o)=>r.showHelp&&r.showHelp(...o))},[p(f,{icon:"fa-solid fa-question",class:"font-bold text-white",size:"2x"})])]),e("div",I,[K,u(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.ticket.problemDetails=o),name:"",id:"",class:"w-8/12 text-black bg-lime-50 border border-solid px-2 rounded-md border-slate-300 h-13",placeholder:"Write the problem being faced in details"},`\r
            \r
            `,512),[[g,l.ticket.problemDetails]])]),e("div",Q,[X,u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.ticket.approvalRequired=o),name:"",id:"",class:"w-8/12 bg-lime-50 border border-solid rounded-md border-slate-300 h-9"},ee,512),[[v,l.ticket.approvalRequired]])]),l.ticket.approvalRequired?(n(),d("div",te,[se,e("div",oe,[p(h,{searchable:"true",options:r.processedUsers2,modelValue:l.ticket.supervisor,"onUpdate:modelValue":t[9]||(t[9]=o=>l.ticket.supervisor=o),name:"",id:"",class:"bg-lime-50 border border-solid rounded-md border-slate-300 h-9 z-10"},null,8,["options","modelValue"])])])):k("",!0),e("div",le,[re,e("div",ie,[p(h,{searchabel:"true",options:r.processedUsers,modelValue:l.ticket.raisedFor,"onUpdate:modelValue":t[10]||(t[10]=o=>l.ticket.raisedFor=o)},null,8,["options","modelValue"])])]),e("div",ae,[ne,u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.ticket.remarks=o),type:"text",name:"",id:"",class:"w-8/12 rounded-md h-9 border-slate-300 border-solid border"},null,512),[[g,l.ticket.remarks]])]),e("div",de,[ce,e("div",ue,[p(f,{icon:"fa-solid fa-paperclip",size:"xl",class:"text-blue-700 mr-5"}),fe,e("input",{type:"file",name:"Attack File",id:"file",placeholder:"Attach File",class:"hidden",multiple:"",onChange:t[12]||(t[12]=o=>r.setFile(o))},null,32),e("div",me,[(n(!0),d(m,null,b(l.files,(o,c)=>(n(),d("div",{for:"",key:c,class:"flex-row flex w-full"},[e("div",pe,x(o.name),1),e("div",he,[p(f,{icon:"fa-solid fa-circle-minus",class:"ml-4 hover:cursor-pointer",onClick:y=>r.removeFile(c)},null,8,["onClick"])])]))),128))])])]),ve,e("div",be,[e("button",{class:"bg-amber-500 h-auto w-auto text-white font-bold py-2 px-10 shadow shadow-black",onClick:t[13]||(t[13]=o=>r.submit())},"Submit Ticket")])])],512)],64)}const ke=S(U,[["render",xe]]);export{ke as default};
