import{_ as x,f as w,r as v,o as u,c as p,b as c,a as e,t as i,j as f,F as b,g as k,d as y,O as T,P as S}from"./index-e5788531.js";const C={data(){return{approval:0,assigned:0,my:0,myCloseRequests:[],closeRequestsForMe:[],info:[],reject:[],infoMe:[],tickets:[],unassigned:[],accepted:[],filteredTickets:[],rejected:[],closed:[],assignedMe:[]}},created(){this.$toast.info("Loading Data....");var o=this,l=this.authStore.getToken,s=this.authStore.getUser,h=new FormData;h.append("token",l),h.append("user",JSON.stringify(s)),w.post(o.globalUrl+"getAllTickets",h).then(a=>{o.tickets=a.data.filter(r=>r.ticketingHead&&r.ticketingHead.empName==s.empName),o.filteredTickets=o.tickets,o.mainStore.setTickets(o.tickets),o.mainStore.setFilteredTickets(o.filteredTickets),o.unassigned=o.tickets.filter(r=>r.assigned==!1&&r.ticketingHead&&r.status!="Submitted Ticket - Seeking Supervisor Approval"&&r.status!="Closed Ticket"),o.accepted=o.tickets.filter(r=>r.currentHandler&&r.accepted==!0&&r.assigned==!0&&r.assignedTo),o.assigned=o.tickets.filter(r=>r.assigned==!0&&r.ticketingHead&&r.currentHandler!=null&&r.accepted==!1),o.approval=o.tickets.filter(r=>r.higherApprover&&r.ticketingHead&&r.currentHandler&&r.currentHandler.mailAddress==r.higherApprover.mailAddress),o.myCloseRequests=o.tickets.filter(r=>r.madeCloseRequest==!0&&r.prevHandler),o.info=o.tickets.filter(r=>r.ask==!0&&r.ticketingHead),o.assignedMe=o.tickets.filter(r=>r.assignedTo&&r.assignedTo.empName==s.empName&&r.accepted!=!0),o.rejected=o.tickets.filter(r=>r.status=="Rejected"),o.closed=o.tickets.filter(r=>r.status=="Closed Ticket"),o.$toast.clear(),o.$toast.success("Data Loaded Successfully")}).catch(a=>{o.$toast.clear(),console.log("this is the error"),o.$toast.warning(a)})},methods:{filter(o,l){var s=this;switch(l){case"unassigned":s.mainStore.setFilteredTickets(s.unassigned),s.mainStore.setInitialTickets(s.unassigned);break;case"assigned":s.mainStore.setFilteredTickets(s.assigned),s.mainStore.setInitialTickets(s.assigned);break;case"accepted":s.mainStore.setFilteredTickets(s.accepted),s.mainStore.setInitialTickets(s.accepted);break;case"approval":s.mainStore.setFilteredTickets(s.approval),s.mainStore.setInitialTickets(s.approval);break;case"info":s.mainStore.setFilteredTickets(s.info),s.mainStore.setInitialTickets(s.info);break;case"close":s.mainStore.setFilteredTickets(s.myCloseRequests),s.mainStore.setInitialTickets(s.myCloseRequests);break;case"all":s.mainStore.setFilteredTickets(s.tickets),s.mainStore.setInitialTickets(s.tickets);break;case"rejected":s.mainStore.setFilteredTickets(s.rejected),s.mainStore.setInitialTickets(s.rejected);break;case"closed":s.mainStore.setFilteredTickets(s.closed),s.mainStore.setInitialTickets(s.closed);break}},showDetails(o){const l="/ticketing/ticketDetails/"+o;this.$router.push(l)}}},d=o=>(T("data-v-f2748c80"),o=o(),S(),o),F={class:"flex flex-row text-lg h-full w-full bg-[rgb(248,248,248)]",id:"app"},j={class:"flex flex-col h-screen customborder bg-white w-1/6 py-10",id:"sidePanel"},H={class:"flex flex-row w-full items-center hover:cursor-pointer"},q={class:"w-1/6 hover:cursor-pointer"},I=d(()=>e("label",{class:"hover:cursor-pointer"},"All Tickets",-1)),A={class:"hover:cursor-pointer"},D={class:"flex flex-row w-full items-center hover:cursor-pointer"},N={class:"w-1/6 hover:cursor-pointer"},R=d(()=>e("label",{class:"hover:cursor-pointer"},"Unassigned Task",-1)),M={class:"hover:cursor-pointer"},B={class:"flex flex-row hover:cursor-pointer w-full items-center"},E={class:"w-1/6 hover:cursor-pointer"},U=d(()=>e("label",{class:"hover:cursor-pointer"},"Assigned Task",-1)),V={class:"hover:cursor-pointer"},L={class:"hover:cursor-pointer flex flex-row w-full items-center"},O={class:"hover:cursor-pointer w-1/6"},P=d(()=>e("label",{class:"hover:cursor-pointer"},"Accepted Task",-1)),J={class:"hover:cursor-pointer"},z={class:"flex flex-row w-full items-center hover:cursor-pointer"},G={class:"w-1/6 hover:cursor-pointer"},K=d(()=>e("label",{class:"hover:cursor-pointer"},"Tickets Awaiting Higher Approval",-1)),Q={class:"hover:cursor-pointer"},W={class:"flex flex-row w-full items-center hover:cursor-pointer"},X={class:"w-1/6 hover:cursor-pointer"},Y=d(()=>e("label",{class:"hover:cursor-pointer"},"My Close Requests",-1)),Z={class:"hover:cursor-pointer"},$={class:"flex flex-row w-full items-center hover:cursor-pointer"},ee={class:"w-1/6 hover:cursor-pointer"},re=d(()=>e("label",{class:"hover:cursor-pointer"},"Information Requested By Me",-1)),se={class:"hover:cursor-pointer"},oe={class:"flex flex-row w-full items-center hover:cursor-pointer"},te={class:"w-1/6 hover:cursor-pointer"},le=d(()=>e("label",{class:"hover:cursor-pointer"},"Tickets Assigned To Me",-1)),ie={class:"hover:cursor-pointer"},ae={class:"h-[100vh] bg-[rgb(248,248,248)] flex flex-col w-5/6 mx-2"},ce={class:"flex flex-row items-end justify-end"},ne={class:"overflow-x-auto mx-2 customerborder w-full overflow-y-scroll",style:{"max-height":"80vh","min-height":"auto"}},de={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},he=d(()=>e("thead",{class:"text-xs text-gray-700 uppercase bg-white dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Ticket No. "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Req. Date "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Status "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," problem "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Requester "),e("th",{scope:"col",class:"table-header2 px-6 py-3"}," Current Handler ")])],-1)),ue=["onClick"],pe={scope:"row",class:"table-row2 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ve={class:"table-row2 px-6 py-4"},fe={class:"table-row2 px-6 py-4"},be={class:"table-row2 px-6 py-4"},_e={class:"table-row2 px-6 py-4"},me={class:"table-row2 px-6 py-4"};function ge(o,l,s,h,a,r){const _=v("FilterDrawer"),n=v("font-awesome-icon"),m=v("FilterButton");return u(),p(b,null,[c(_),e("div",F,[e("div",j,[e("div",{onClick:l[0]||(l[0]=t=>r.filter(t,"all")),class:"flex flex-row justify-around items-center w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",H,[e("div",q,[c(n,{icon:"fa-solid fa-border-all",class:"hover:cursor-pointer"})]),I]),e("label",A,i(a.tickets.length),1)]),e("div",{onClick:l[1]||(l[1]=t=>r.filter(t,"unassigned")),class:"flex flex-row justify-around items-center w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",D,[e("div",N,[c(n,{icon:"fa-solid fa-tasks",class:"hover:cursor-pointer"})]),R]),e("label",M,i(a.unassigned.length),1)]),e("div",{onClick:l[2]||(l[2]=t=>r.filter(t,"assigned")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",B,[e("div",E,[c(n,{icon:"fa-solid fa-thumbtack hover:cursor-pointer "})]),U]),e("label",V,i(a.assigned.length),1)]),e("div",{onClick:l[3]||(l[3]=t=>r.filter(t,"accepted")),class:"hover:cursor-pointer flex flex-row justify-around w-full px-5 hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",L,[e("div",O,[c(n,{icon:" hover:cursor-pointer fa-solid fa-check"})]),P]),e("label",J,i(a.accepted.length),1)]),e("div",{onClick:l[4]||(l[4]=t=>r.filter(t,"approval")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",z,[e("div",G,[c(n,{icon:"fa-solid fa-thumbtack",class:"hover:cursor-pointer"})]),K]),e("label",Q,i(a.approval.length),1)]),e("div",{onClick:l[5]||(l[5]=t=>r.filter(t,"close")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",W,[e("div",X,[c(n,{icon:"fa-solid fa-file-export",class:"hover:cursor-pointer"})]),Y]),e("label",Z,i(a.myCloseRequests.length),1)]),e("div",{onClick:l[6]||(l[6]=t=>r.filter(t,"info")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",$,[e("div",ee,[c(n,{icon:"fa-solid fa-question",class:"hover:cursor-pointer"})]),re]),e("label",se,i(a.infoMe.length),1)]),e("div",{onClick:l[7]||(l[7]=t=>r.filter(t,"assignedMe")),class:"flex flex-row justify-around w-full px-5 hover:cursor-pointer hover:bg-[rgb(237,237,237)] hover:border-r-4 hover:border-solid hover:border-r-emerald-500"},[e("div",oe,[e("div",te,[c(n,{icon:"fa-solid fa-question",class:"hover:cursor-pointer"})]),le]),e("label",ie,i(a.assignedMe.length),1)])]),e("div",ae,[e("div",ce,[e("div",{onClick:l[8]||(l[8]=(...t)=>this.downloadExcel&&this.downloadExcel(...t)),class:"p-2 bg-white hover:cursor-pointer border border-solid border-gray-400 rounded-sm mt-2 mb-2 mr-2"},[c(n,{icon:"fa-solid fa-table",class:"mr-2"}),f("Download As Excel")]),f(),c(m)]),e("div",ne,[e("table",de,[he,e("tbody",null,[(u(!0),p(b,null,k(this.mainStore.getFilteredTickets,(t,g)=>(u(),p("tr",{onClick:xe=>r.showDetails(t._id),class:"hover:cursor-pointer bg-white border-b dark:bg-gray-800 dark:border-gray-700",key:g},[e("th",pe,i(t._id),1),e("td",ve,i(t.requestDate),1),e("td",fe,i(t.status),1),e("td",be,i(t.problemDetails),1),e("td",_e,i(t.raisedBy.empName),1),e("td",me,[t.currentHandler?(u(),p(b,{key:0},[f(i(t.currentHandler.empName),1)],64)):y("",!0)])],8,ue))),128))])])])])])],64)}const ke=x(C,[["render",ge],["__scopeId","data-v-f2748c80"]]);export{ke as default};
