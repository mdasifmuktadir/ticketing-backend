import{_ as b,f as c,o as a,c as n,a as t,z as f,w as h,h as x,F as u,g as p,v,t as g,d as _}from"./index-e5788531.js";import{T as w}from"./tagify-d17b84b2.js";const y={data(){return{token:null,user:{},groups:null,groupTags:null,addUserCheck:!1,deparmtents:null,admins:null}},watch:{addUserCheck(s,e){s==!0&&this.$nextTick(()=>{this.loadGroups()})}},created(){this.admins=this.mainStore.getAdmins,this.token=this.authStore.getToken,this.groups=this.mainStore.getGroups;var s=this.mainStore.getDepartments;this.departments=s.filter(e=>e.email==null&&e.name!=null),this.addUserCheck=!0,this.getUsers()},methods:{getUsers(){var s=this;c.get(s.globalUrl+"api/getUsers").then(e=>{s.admins=e.data,console.log(e.data)}).catch(e=>{console.log(e)})},addUser:function(){var s=this;this.user.groups=this.groupTags.value.map(function(r){return r.value});var e=this.admins.filter(r=>r.mailAddress==this.user.mailAddress)[0];e.groups=this.user.groups,e.department=this.user.department,e.userType="Admin",console.log("this is the mainUser"),console.log(e);var l={user:e,token:this.token};console.log("this is the user being inserted"),console.log(l.user),c.post(s.globalUrl+"insertUser",l).then(r=>{console.log(r),s.$router.push("/masterAdmin")},r=>{console.log(r)})},loadGroups(){var s=[];console.log("from tagify function"),console.log(this.groups.length);for(let l of this.groups)s.push(l.name),console.log("inside for loop"),console.log(l.name);var e=document.querySelector("#groups");this.groupTags=new w(e,{whitelist:s,maxTags:10,enforceWhitelist:!0,dropdown:{maxItems:20,classname:"tags-look",enabled:0,closeOnSelect:!1}})}}},k={class:"flex flex-col justify-center items-center h-auto text-xs"},U={class:"shadow-2xl hover:shadow-blue-600 w-auto flex flex-col justify-center items-center bg-white"},A=t("div",{class:"flex text-white flex-row justify-center items-start w-full bg-blue-500 mb-10 p-4"},[t("span",{class:"text-4xl font-bold"},"Add Admin")],-1),T=t("label",{class:"mb-20 font-bold"},"Email Address",-1),S={id:"emailList"},C=["value"],V=t("label",{class:"mb-20 font-bold mt-10"},"Department",-1),D=["value"],G=t("label",{class:"mb-20 font-bold mt-10"},"Groups",-1),j=t("input",{type:"text",name:"groups",id:"groups",class:"mb-4 h-11 w-full border border-solid border-gray-200"},null,-1),B=t("br",{class:"border border-solid border-black"},null,-1),L=t("button",{type:"submit",class:"w-full mt-8 h-11 bg-blue-500 rounded-md text-2xl text-white font-bold mb-2"},"Add",-1);function M(s,e,l,r,i,m){return a(),n("div",k,[t("div",U,[A,t("form",{onSubmit:e[3]||(e[3]=f((...o)=>m.addUser&&m.addUser(...o),["prevent"])),class:"h-auto w-auto px-10"},[T,h(t("input",{list:"emailList","onUpdate:modelValue":e[0]||(e[0]=o=>i.user.mailAddress=o),required:"",class:"w-full h-11 mb-4 border border-solid border-gray-200"},null,512),[[x,i.user.mailAddress]]),t("datalist",S,[(a(!0),n(u,null,p(i.admins,(o,d)=>(a(),n(u,{key:d},[o.mailAddress?(a(),n("option",{key:0,value:o.mailAddress},g(o.mailAddress),9,C)):_("",!0)],64))),128))]),V,h(t("select",{type:"text",name:"department",id:"department","onUpdate:modelValue":e[1]||(e[1]=o=>i.user.department=o),class:"mb-4 h-11 w-full border border-solid border-gray-200"},[(a(!0),n(u,null,p(s.departments,(o,d)=>(a(),n("option",{key:d,value:o.name},g(o.name),9,D))),128))],512),[[v,i.user.department]]),G,j,B,L,t("button",{onClick:e[2]||(e[2]=o=>this.$router.push("/admin/users")),class:"w-full h-11 bg-gray-300 rounded-md text-2xl text-gray-500 font-bold mb-10"},"Return")],32)])])}const F=b(y,[["render",M]]);export{F as default};
