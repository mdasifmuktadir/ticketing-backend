import{_ as g,f as v,r as y,o as m,c as u,a as e,w as c,h as p,F as b,g as h,t as _,b as x}from"./index-e5788531.js";const A={data(){return{admins:null,filteredAdmins:null,filterName:null,filterMail:null,filterId:null,filterName:null}},computed:{emailList(){var l=this.admins.map(t=>t.mailAddress);return l},nameList(){var l=this.admins.map(t=>t.empName);return l},idList(){var l=this.admins.map(t=>t._id);return l}},created(){this.loadAdmins()},methods:{loadAdmins(){var l=this;v.get(l.globalUrl+"getAdmins").then(t=>{console.log(t.data),l.admins=t.data,l.filteredAdmins=t.data,l.mainStore.setAdmins(t.data)}).catch(t=>{console.log(t.message)})},addAdmin(){this.$router.push("/masterAdmin/add")},insertAdmin(l){var t=this,a=new FormData,n=l.target.elements;console.log("elements"),console.log(n.name.value),a.append("name",n.name.value),a.append("email",n.email.value),a.append("Id",n.Id.value),a.append("designation",n.designation.value),a.append("department",n.department.value),a.append("zone",n.zone.value),a.append("userType","Admin"),console.log("from form data"),console.log(a.name),v.post(t.globalUrl+"insertUser",a,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{console.log(s.data);var r=document.getElementById("form"),f=document.getElementById("table");f.classList.remove("blur"),r.classList.remove("fixed"),r.classList.add("hidden"),t.loadAdmins()}).catch(s=>{console.log(s)})},closeForm(){var l=document.getElementById("form"),t=document.getElementById("table");t.classList.remove("blur"),l.classList.remove("fixed"),l.classList.add("hidden")},updateAdmin(l){var t=l._id;this.$router.push("/masterAdmin/update/"+t)},deleteAdmin(l){var t=this,a=this.authStore.getUser,n=this.authStore.getToken,s={user:a,token:n,user:l};v.post(t.globalUrl+"deleteUser",s).then(r=>{console.log(r),t.loadAdmins()}).catch(r=>{console.log(r.message)})},filter(){var l=this,t=[this.filterMail,this.filterId,this.filterName],a=t.map(s=>s==null||s==""?"All":s),n=[{name:"mailAddress",value:a[0]},{name:"_id",value:a[1]},{name:"empName",value:a[2]}];l.filteredAdmins=l.admins.filter(s=>{for(var r of n)if(r.value!="All"&&s[r.name]!=r.value)return!1;return!0})}}},k={class:"flex flex-row items-center justify-between bg-blue-100 h-14 mt-3"},w={class:"flex flex-row justify-around ml-10"},L=e("label",{for:"",class:"mr-2 ml-2"},"Email:",-1),U={id:"emailList"},V=["value"],N=e("label",{for:"",class:"mr-2 ml-10"},"Name",-1),I={id:"nameList"},B=["value"],D=e("label",{for:"",class:"mr-2 ml-10"},"ID:",-1),E={id:"idList"},F=["value"],M={id:"app",class:"w-full h-2/4 overflow-y-scroll overflow-x-scroll px-5 flex flex-col mt-2"},j={class:"table w-full text-sm border border-slate-500 border-solid overflow-x-scroll",id:"table"},S=e("thead",{class:"bg-blue-500 text-white font-bold"},[e("th",{class:"sticky top-0 border border-slate-300 h-14 bg-blue-500 text-center pr-16 text-sm"}," Name "),e("th",{class:"sticky top-0 border border-slate-300 h-14 bg-blue-500 text-center pr-16 text-sm"}," Email "),e("th",{class:"sticky top-0 border border-slate-300 h-14 bg-blue-500 text-center pr-16 text-sm"}," Designation "),e("th",{class:"sticky top-0 border border-slate-300 h-14 bg-blue-500 text-center pr-16 text-sm"}," Department "),e("th",{class:"sticky top-0 border border-slate-300 h-14 bg-blue-500 text-center pr-16 text-sm"}," ID "),e("th",{class:"sticky top-0 border border-slate-300 h-14 bg-blue-500 text-center pr-16 text-sm"})],-1),T={class:"border-2 border-solid text-sm text-center border-slate-300 pr-16"},z=["onUpdate:modelValue"],q={class:"border-2 border-solid text-sm text-center border-slate-300 pr-16"},G=["onUpdate:modelValue"],H={class:"border-2 border-solid text-sm text-center border-slate-300 pr-16"},J=["onUpdate:modelValue"],K={class:"border-2 border-solid text-sm text-center border-slate-300 pr-16"},O=["onUpdate:modelValue"],P={class:"border-2 border-solid text-sm text-center border-slate-300 pr-16"},Q=["onUpdate:modelValue"],R={class:"border-2 border-solid text-sm border-slate-300 flex flex-row justify-around"},W=["onClick"],X=["onClick"],Y={class:"flex flex-row justify-end items-end"};function Z(l,t,a,n,s,r){const f=y("font-awesome-icon");return m(),u(b,null,[e("div",k,[e("div",w,[e("div",null,[L,c(e("input",{type:"email",list:"emailList","onUpdate:modelValue":t[0]||(t[0]=o=>s.filterMail=o),class:"h-7 rounded-sm border border-black border-solid"},null,512),[[p,s.filterMail]]),e("datalist",U,[(m(!0),u(b,null,h(r.emailList,(o,d)=>(m(),u("option",{value:o,key:d},_(o),9,V))),128))])]),e("div",null,[N,c(e("input",{type:"text",list:"nameList",class:"h-7 rounded-sm border border-black border-solid","onUpdate:modelValue":t[1]||(t[1]=o=>s.filterName=o)},null,512),[[p,s.filterName]]),e("datalist",I,[(m(!0),u(b,null,h(r.nameList,(o,d)=>(m(),u("option",{value:o,key:d},_(o),9,B))),128))])]),e("div",null,[D,c(e("input",{type:"text",list:"idList",class:"h-7 rounded-sm border border-black border-solid","onUpdate:modelValue":t[2]||(t[2]=o=>s.filterId=o)},null,512),[[p,s.filterId]]),e("datalist",E,[(m(!0),u(b,null,h(r.idList,(o,d)=>(m(),u("option",{value:o,key:d},_(o),9,F))),128))])])]),e("button",{onClick:t[3]||(t[3]=o=>r.filter()),class:"h-9 rounded-sm bg-amber-500 text-white font-bold px-4 mr-4"},"Filter")]),e("div",M,[e("table",j,[S,e("tbody",null,[(m(!0),u(b,null,h(s.filteredAdmins,(o,d)=>(m(),u("tr",{key:d},[e("td",T,[c(e("input",{type:"text","onUpdate:modelValue":i=>s.admins[d].empName=i},null,8,z),[[p,s.admins[d].empName]])]),e("td",q,[c(e("input",{type:"text","onUpdate:modelValue":i=>s.admins[d].mailAddress=i},null,8,G),[[p,s.admins[d].mailAddress]])]),e("td",H,[c(e("input",{type:"text","onUpdate:modelValue":i=>s.admins[d].designation=i},null,8,J),[[p,s.admins[d].designation]])]),e("td",K,[c(e("input",{type:"text","onUpdate:modelValue":i=>s.admins[d].department=i},null,8,O),[[p,s.admins[d].department]])]),e("td",P,[c(e("input",{type:"text","onUpdate:modelValue":i=>s.admins[d]._id=i},null,8,Q),[[p,s.admins[d]._id]])]),e("td",R,[e("button",{onClick:i=>r.updateAdmin(o),class:"fa-solid fa-pen text-green-500"},[x(f,{icon:"fa-solid fa-pen text-green-500"})],8,W),e("button",{onClick:i=>r.deleteAdmin(o),class:"fa-solid fa-trash text-red-500"},[x(f,{icon:"fa-solid fa-trash text-red-500"})],8,X)])]))),128))])])]),e("div",Y,[e("button",{onClick:t[4]||(t[4]=o=>r.addAdmin()),class:"bg-blue-500 text-white rounded-md m-3 p-3 h-auto w-auto"},"Add Admin")])],64)}const $=g(A,[["render",Z]]);export{$ as default};
